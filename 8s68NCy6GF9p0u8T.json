{
  "active": false,
  "connections": {
    "‚úÖ Is Container Ready?": {
      "main": [
        [
          {
            "node": "Switch1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "anyError",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "‚è∞ Initial Processing Wait": {
      "main": [
        [
          {
            "node": "Check_Status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "‚è∞ Retry Wait Loop": {
      "main": [
        [
          {
            "node": "Check_Status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "anyError": {
      "main": [
        [
          {
            "node": "update_error",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "‚è∞ Retry Wait Loop",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "upload": {
      "main": [
        [
          {
            "node": "set2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check_Status": {
      "main": [
        [
          {
            "node": "‚úÖ Is Container Ready?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Publish": {
      "main": [
        [
          {
            "node": "update_sucess",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üì§ Publish via HTTP API": {
      "main": [
        [
          {
            "node": "update_sucess",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "get_container_id_insta",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "get_container_id_fb",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch1": {
      "main": [
        [
          {
            "node": "üì§ Publish via HTTP API",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Publish",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get_container_id_fb": {
      "main": [
        [
          {
            "node": "upload",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get_container_id_insta": {
      "main": [
        [
          {
            "node": "set1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "set2": {
      "main": [
        [
          {
            "node": "‚è∞ Initial Processing Wait",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "set1": {
      "main": [
        [
          {
            "node": "‚è∞ Initial Processing Wait",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "update_sucess": {
      "main": [
        [
          {
            "node": "LOG",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "update_error": {
      "main": [
        [
          {
            "node": "LOG",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-10-07T18:09:57.362Z",
  "id": "8s68NCy6GF9p0u8T",
  "isArchived": false,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "POST FACEBOOK - PARALLEL",
  "nodes": [
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": false,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "682def4c-2cda-4417-9329-682a8a60feed",
              "leftValue": "={{ JSON.stringify($json.status) }}",
              "rightValue": "upload_complete",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            },
            {
              "id": "b7fa2490-02f3-409a-8bf0-5ffab4acf9b9",
              "leftValue": "={{ JSON.stringify($json.status) }}",
              "rightValue": "Finished",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {
          "ignoreCase": true
        }
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -896,
        16
      ],
      "id": "c9502c07-df66-4b4d-bfe4-8220a84e7bc7",
      "name": "‚úÖ Is Container Ready?"
    },
    {
      "parameters": {
        "amount": 30
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        -1344,
        80
      ],
      "id": "1c39728c-7129-4763-800c-9448be94362f",
      "name": "‚è∞ Initial Processing Wait",
      "webhookId": "1c31a965-a646-4247-8591-bdbfdfd44f56"
    },
    {
      "parameters": {
        "amount": 1,
        "unit": "minutes"
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        -448,
        368
      ],
      "id": "5dc4d6c3-1110-4611-8df1-ef96959c7666",
      "name": "‚è∞ Retry Wait Loop",
      "webhookId": "ec9f9eba-de1d-4683-b6b7-bfddeb111ca3"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": false,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "682def4c-2cda-4417-9329-682a8a60feed",
              "leftValue": "={{ $json.status.video_status }}",
              "rightValue": "error",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {
          "ignoreCase": true
        }
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -672,
        208
      ],
      "id": "ba359b20-ba01-4a7e-98f7-3d5d4be6c80d",
      "name": "anyError"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $('get_container_id_fb').item.json.upload_url }}",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "access_token",
              "value": "={{ $('Loop Over Items').item.json.access_token }}"
            }
          ]
        },
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "file_url",
              "value": "={{ $('Loop Over Items').item.json.public.replace(/^https:\\/\\//, 'http://') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -1792,
        176
      ],
      "id": "81fcb20f-d67c-41b7-b4f9-25ee6eddc0aa",
      "name": "upload"
    },
    {
      "parameters": {
        "url": "=https://graph.facebook.com/v23.0/{{ $json.id }}",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "fields",
              "value": "status"
            },
            {
              "name": "access_token",
              "value": "={{ $('Loop Over Items').item.json.access_token }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -1120,
        80
      ],
      "id": "e80ff224-ab11-42ed-9b4b-deb056f53c5f",
      "name": "Check_Status"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://graph.facebook.com/v23.0//{{ $('Loop Over Items').item.json.acc_id }}/video_reels",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "access_token",
              "value": "={{ $('Loop Over Items').item.json.access_token }}"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"video_id\": \"{{ $json.id }}\",\n  \"upload_phase\": \"finish\",\n  \"video_state\": \"PUBLISHED\",\n  \"description\": \"{{ $('Loop Over Items').item.json.title.replace(/\\n/g, ' ') }}\"\n}\n\n",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -448,
        -32
      ],
      "id": "20ecf1b1-a43c-4f1f-ba1d-a1ab47967942",
      "name": "Publish"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://graph.facebook.com/v22.0/{{ $('Loop Over Items').item.json.acc_id }}/media_publish",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "creation_id",
              "value": "={{ $json.id }}"
            },
            {
              "name": "access_token",
              "value": "={{ $('Loop Over Items').item.json.access_token }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -448,
        -224
      ],
      "id": "108726b5-f98e-45ad-a6ac-67f98ea29ec2",
      "name": "üì§ Publish via HTTP API"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Loop Over Items').item.json.type }}",
                    "rightValue": "insta",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "d67cc145-9ea5-401d-b37f-ec122bbb5696"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "1deeb985-1ac3-422e-92e1-4e8b406b88b8",
                    "leftValue": "={{ $('Loop Over Items').item.json.type }}",
                    "rightValue": "fb",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        -2240,
        96
      ],
      "id": "dcd9bdc5-acfe-4348-b89b-f9d70c8c818a",
      "name": "Switch"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Loop Over Items').item.json.type }}",
                    "rightValue": "insta",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "d67cc145-9ea5-401d-b37f-ec122bbb5696"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "1deeb985-1ac3-422e-92e1-4e8b406b88b8",
                    "leftValue": "={{ $('Loop Over Items').item.json.type }}",
                    "rightValue": "fb",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        -672,
        -128
      ],
      "id": "a1856d3d-d791-47aa-a390-3b0f3a1ed2e1",
      "name": "Switch1"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://graph.facebook.com/v23.0/{{ $('Loop Over Items').item.json.acc_id }}/video_reels",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "access_token",
              "value": "={{ $('Loop Over Items').item.json.access_token }}"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n   \"upload_phase\":\"start\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -2016,
        176
      ],
      "id": "fc81df12-7cc4-403a-94d3-3e99b3fae22e",
      "name": "get_container_id_fb"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://graph.facebook.com/v22.0/{{ $('Loop Over Items').item.json.acc_id }}/media",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "media_type",
              "value": "REELS"
            },
            {
              "name": "video_url",
              "value": "={{ $('Loop Over Items').item.json.public }}"
            },
            {
              "name": "caption",
              "value": "={{ $('Loop Over Items').item.json.description }}"
            },
            {
              "name": "access_token",
              "value": "={{ $('Loop Over Items').item.json.access_token }}"
            },
            {
              "name": "audio_name",
              "value": "={{ $('Loop Over Items').item.json.username }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -1792,
        -16
      ],
      "id": "4519fd8f-23c5-48a0-8ac9-fde1ef7225bf",
      "name": "get_container_id_insta"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "016dbdd3-7b5a-48fa-b1bc-640d629b1fa5",
              "name": "id",
              "value": "={{ $('get_container_id_fb').item.json.video_id }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1568,
        176
      ],
      "id": "05d92d06-23d3-42f3-8925-867223eb0c35",
      "name": "set2"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "016dbdd3-7b5a-48fa-b1bc-640d629b1fa5",
              "name": "id",
              "value": "={{ $json.id }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1568,
        -16
      ],
      "id": "da818e19-7f27-42b0-910c-0ba52026c813",
      "name": "set1"
    },
    {
      "parameters": {
        "inputSource": "passthrough"
      },
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1.1,
      "position": [
        -2416,
        96
      ],
      "id": "cf8435ac-84f2-4fb8-becd-c2adaf23e80a",
      "name": "Loop Over Items"
    },
    {
      "parameters": {
        "dataTableId": {
          "__rl": true,
          "value": "4R0Z8jKlxBbX97in",
          "mode": "list",
          "cachedResultName": "LOG",
          "cachedResultUrl": "/projects/COQIBF46Vn0bg2e3/datatables/4R0Z8jKlxBbX97in"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "username": "={{ $('Loop Over Items').item.json.username }}",
            "public": "={{ $('Loop Over Items').item.json.public }}",
            "type": "={{ $('Loop Over Items').item.json.type }}",
            "row_id": "={{ $('Loop Over Items').item.json.id }}",
            "acc_id": "={{ $('Loop Over Items').item.json.acc_id }}",
            "time": "={{ new Date().toLocaleString('en-GB', { day: 'numeric', month: 'short' }) + ' [' + new Date().toLocaleString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true }) + ']' }}",
            "title": "={{ $('Loop Over Items').item.json.title }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "username",
              "displayName": "username",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "public",
              "displayName": "public",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "type",
              "displayName": "type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "acc_id",
              "displayName": "acc_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "row_id",
              "displayName": "row_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "time",
              "displayName": "time",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "title",
              "displayName": "title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        -224,
        192
      ],
      "id": "47543339-6feb-4d04-8ecb-6a2c855cb68e",
      "name": "LOG"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "UPDATE {{ $('Loop Over Items').item.json.database_name }}\nSET  {{ $('Loop Over Items').item.json.type }}= 'DONE'\nWHERE id = '{{ $('Loop Over Items').item.json.id }}';\n",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -224,
        -112
      ],
      "id": "56ce3a95-ce32-41c8-8bb6-93f64fb35510",
      "name": "update_sucess",
      "credentials": {
        "postgres": {
          "id": "NTm0aBQ2ka4qBTqV",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "UPDATE {{ $('check_process_list').item.json.database_name }}\nSET fb = 'ERROR'\nWHERE public = '{{ $('check_process_list').item.json.public }}';",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -448,
        192
      ],
      "id": "d2de859a-a8a0-4ba6-b9aa-70d5886af7d5",
      "name": "update_error",
      "credentials": {
        "postgres": {
          "id": "NTm0aBQ2ka4qBTqV",
          "name": "Postgres account"
        }
      }
    }
  ],
  "origin": "n8n",
  "pinData": {},
  "repo": {
    "owner": "hellomdasif",
    "name": "n8n-backup"
  },
  "settings": {
    "executionOrder": "v1",
    "callerPolicy": "workflowsFromSameOwner",
    "availableInMCP": false,
    "errorWorkflow": "o9ORuJvZYNmMmFfK",
    "executionTimeout": 600
  },
  "shared": [
    {
      "createdAt": "2025-10-07T18:09:57.368Z",
      "updatedAt": "2025-10-07T18:09:57.368Z",
      "role": "workflow:owner",
      "workflowId": "8s68NCy6GF9p0u8T",
      "projectId": "COQIBF46Vn0bg2e3"
    }
  ],
  "staticData": {
    "node:Schedule Trigger": {
      "recurrenceRules": [
        18
      ]
    },
    "node:Google Sheets Trigger": {
      "documentId": "1xiPfhzJCG69yDe8NUAykc9W4sT4AazIo3GGep4oXv0k",
      "sheetId": 0,
      "lastRevision": 69,
      "lastRevisionLink": "https://docs.google.com/spreadsheets/export?id=1xiPfhzJCG69yDe8NUAykc9W4sT4AazIo3GGep4oXv0k&revision=69&exportFormat=xlsx"
    }
  },
  "tags": [
    {
      "createdAt": "2025-10-07T12:13:49.553Z",
      "updatedAt": "2025-10-07T12:13:49.553Z",
      "id": "RDHUqhF8fggE5BPq",
      "name": "FACEBOOK-INSTA"
    }
  ],
  "triggerCount": 0,
  "updatedAt": "2025-10-22T16:25:05.000Z",
  "versionId": "5f31610f-a035-4cbe-ba5c-9eed15d0147d"
}