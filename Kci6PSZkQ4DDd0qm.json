{
  "active": false,
  "connections": {
    "Read/Write Files from Disk": {
      "main": [
        [
          {
            "node": "select_bg",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "download": {
      "main": [
        [
          {
            "node": "Read/Write Files from Disk",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append or update row in sheet": {
      "main": [
        []
      ]
    },
    "start": {
      "main": [
        [
          {
            "node": "config",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "config2": {
      "main": [
        [
          {
            "node": "download",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "config": {
      "main": [
        [
          {
            "node": "accounts",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When clicking ‘Execute workflow’": {
      "main": [
        [
          {
            "node": "config",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "IF FINAL EMPTY1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "IF FINAL EMPTY",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "IF FINAL EMPTY2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "IF FINAL EMPTY2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "IF FINAL EMPTY2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "IF FINAL EMPTY2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "IF FINAL EMPTY2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If1": {
      "main": [
        [
          {
            "node": "Switch1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "final_url",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "build_public_url": {
      "main": [
        [
          {
            "node": "INSERT_PUBLIC",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch1": {
      "main": [
        [
          {
            "node": "KahaniExpress",
            "type": "main",
            "index": 0
          }
        ],
        []
      ]
    },
    "build_final_url_mohd_asif": {
      "main": [
        [
          {
            "node": "INSERT_FINAL_MOHD_ASIF",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "build_public_url1": {
      "main": [
        [
          {
            "node": "INSERT_PUBLIC_ReelSense",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "MILLION_VIEWS": {
      "main": [
        [
          {
            "node": "build_final_url_mohd_asif",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF FINAL EMPTY1": {
      "main": [
        [
          {
            "node": "config2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Prepared",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF FINAL EMPTY": {
      "main": [
        [
          {
            "node": "build_public_url",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Prepared",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF FINAL EMPTY2": {
      "main": [
        [
          {
            "node": "build_public_url1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Prepared",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Execute": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "KahaniExpress": {
      "main": [
        [
          {
            "node": "build_final_url_mohd_asif",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "command_t": {
      "main": [
        []
      ]
    },
    "command": {
      "main": [
        [
          {
            "node": "update_backgroubd_status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download Background": {
      "main": [
        [
          {
            "node": "Read/Write Files from Disk1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Read/Write Files from Disk1": {
      "main": [
        [
          {
            "node": "command",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Call 'POST FACEBOOK - PARALLEL'": {
      "main": [
        []
      ]
    },
    "accounts": {
      "main": [
        [
          {
            "node": "pending_url",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "pending_url": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "select_bg": {
      "main": [
        [
          {
            "node": "Download Background",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "update_backgroubd_status": {
      "main": [
        [
          {
            "node": "set_public_link",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "set_public_link": {
      "main": [
        [
          {
            "node": "Prepared",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Prepared": {
      "main": [
        [
          {
            "node": "If1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "INSERT_PUBLIC_ReelSense": {
      "main": [
        [
          {
            "node": "Prepared",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "INSERT_PUBLIC": {
      "main": [
        [
          {
            "node": "Prepared",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "final_url": {
      "main": [
        [
          {
            "node": "After_mod_Prepared",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "INSERT_FINAL_MOHD_ASIF": {
      "main": [
        [
          {
            "node": "After_mod_Prepared",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "After_mod_Prepared": {
      "main": [
        [
          {
            "node": "Execute",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "Call Youtube Poster",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Call 'POST FACEBOOK - PARALLEL'",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-10-07T03:09:18.154Z",
  "id": "Kci6PSZkQ4DDd0qm",
  "isArchived": false,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "build_data_fb_insta (GOD MOD)",
  "nodes": [
    {
      "parameters": {
        "operation": "write",
        "fileName": "={{ $('accounts').item.json.root_dir }}/python/games/icons/{{ $('pending_url').item.json.image.match(/id=([^&]+)/)[1] }}.png",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        -1232,
        -2128
      ],
      "id": "a1f3a58b-740a-4614-9592-4e47a19cf36c",
      "name": "Read/Write Files from Disk"
    },
    {
      "parameters": {
        "url": "={{ $('pending_url').item.json.image }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -1392,
        -2128
      ],
      "id": "741df578-beba-44d7-9cd1-8a5dd096817f",
      "name": "download"
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1xiPfhzJCG69yDe8NUAykc9W4sT4AazIo3GGep4oXv0k",
          "mode": "list",
          "cachedResultName": "PROCESS FACEBOOK",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1xiPfhzJCG69yDe8NUAykc9W4sT4AazIo3GGep4oXv0k/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1xiPfhzJCG69yDe8NUAykc9W4sT4AazIo3GGep4oXv0k/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "public": "={{ $json.final }}",
            "access_token": "={{ $('accounts').item.json.token }}",
            "database_name": "={{ $('accounts').item.json.database_name }}",
            "status": "Pending",
            "acc_id": "={{ $('accounts').item.json.acc_id }}",
            "title": "={{ $('config').item.json.title ? $json.title : $('accounts').item.json.default_title }}\n",
            "description": "={{ $('config').item.json.description ? $json.title : $('accounts').item.json.default_des }}\n",
            "type": "={{ $('config').item.json.type }}",
            " username": "={{ $('accounts').item.json.username }}",
            "id": "={{ $json.id }}"
          },
          "matchingColumns": [
            "acc_id"
          ],
          "schema": [
            {
              "id": " username",
              "displayName": " username",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "public",
              "displayName": "public",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "access_token",
              "displayName": "access_token",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "database_name",
              "displayName": "database_name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "acc_id",
              "displayName": "acc_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "title",
              "displayName": "title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "description",
              "displayName": "description",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "type",
              "displayName": "type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1200,
        -1760
      ],
      "id": "3901ecdc-5c3d-4f89-8e7a-669c1f377eb7",
      "name": "Append or update row in sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "H3U1X4hjIcv7PxVl",
          "name": "hellomohdasif@gmail.com"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "inputSource": "passthrough"
      },
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1.1,
      "position": [
        -3008,
        -1632
      ],
      "id": "409af4c1-8795-48a7-ab07-5355e134c4e5",
      "name": "start"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "235e1dfd-b7bb-40e9-a708-f495c8361968",
              "name": "file",
              "value": "={{$env.BASE_DIR}}{{ $('accounts').item.json.folder }}v2.py",
              "type": "string"
            },
            {
              "id": "ad67ccd6-fa0b-493f-b7f5-d3c517e7a402",
              "name": "input_image",
              "value": "={{$env.BASE_DIR}}{{ $('accounts').item.json.folder }}input.jpg ",
              "type": "string"
            },
            {
              "id": "53643391-bd34-45ae-92f2-b09c42d88bee",
              "name": "input_video",
              "value": "={{$env.BASE_DIR}}{{ $('accounts').item.json.folder }}input/{{ String(Math.floor(Math.random() * 28) + 1).padStart(3, '0') }}.mp4",
              "type": "string"
            },
            {
              "id": "ef82fb45-0b77-4793-bdca-fa5a565eb7f4",
              "name": "output__video",
              "value": "={{$env.BASE_DIR}}{{ $('accounts').item.json.folder }}output/{{ $json.id }}.mp4",
              "type": "string"
            },
            {
              "id": "e4456bd9-36e6-490d-8067-18c207ebf21b",
              "name": "audio",
              "value": "={{$env.BASE_DIR}}{{ $('accounts').item.json.folder }}audio.mp3",
              "type": "string"
            },
            {
              "id": "0e5c521a-b028-434d-8602-0d9ac00cde6d",
              "name": "finalurl",
              "value": "=https://files.mohdasif.net{{ $('accounts').item.json.folder }}output/{{ $('pending_url').item.json.id }}.mp4",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1552,
        -2128
      ],
      "id": "fe5a91a7-1a44-4bf2-a401-4ff954e99c9f",
      "name": "config2"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "638acc1e-78f9-49fb-9988-2fbc39c24bcf",
              "name": "username",
              "value": "={{ $json.username }}",
              "type": "string"
            },
            {
              "id": "35ae89a7-f63e-4873-9943-48a0353553d1",
              "name": "type",
              "value": "={{ $json.type }}",
              "type": "string"
            },
            {
              "id": "49cc4872-f0c8-4630-9d2b-776ab3e26f7b",
              "name": "title",
              "value": "={{ $json.title }}",
              "type": "boolean"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -2784,
        -1536
      ],
      "id": "d04f865e-030e-4094-9842-ea28d6a20bb2",
      "name": "config"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -3008,
        -1440
      ],
      "id": "68ff4ffc-57ae-44d3-a54d-cdb5cba40c25",
      "name": "When clicking ‘Execute workflow’",
      "disabled": true
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('config').item.json.username }}",
                    "rightValue": "urban__raja",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "044222b3-8bb6-49ab-894b-9b3fee1fe343"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "urban__raja"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "087647e1-c883-48ad-b04b-a2fce36eb524",
                    "leftValue": "={{ $('config').item.json.username }}",
                    "rightValue": "KahaniExpress",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "KahaniExpress"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "83ea2689-510b-4ec7-92a0-dd5f8dfe51bf",
                    "leftValue": "={{ $('config').item.json.username }}",
                    "rightValue": "ReelSense",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "ReelSense"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "04be0559-ef87-434e-b0b1-b68486abee4f",
                    "leftValue": "={{ $('config').item.json.username }}",
                    "rightValue": "knowsparkz",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "knowsparkz"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "6a67b3fb-f5fe-44c9-aa4d-e6f8824465df",
                    "leftValue": "={{ $('config').item.json.username }}",
                    "rightValue": "Tanvi_Kapoor_01",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Tanvi_Kapoor_01"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "504ea99e-3b5c-4193-92c4-9fde431ebf9c",
                    "leftValue": "={{ $('config').item.json.username }}",
                    "rightValue": "FactsMind_99",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "FactsMind_99 - Youtube"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "09dc5665-30c4-4258-96f5-cb42da82dde3",
                    "leftValue": "={{ $('config').item.json.username }}",
                    "rightValue": "GyaanManch",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "GyaanManch Same as knowsparkz [utube]"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        -2048,
        -1552
      ],
      "id": "a5201cff-3225-40c6-bcc4-8dd094d7ba18",
      "name": "Switch"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "4e754235-9b9f-4f02-85b2-a52409c1e5e5",
              "leftValue": "={{ $json.final }}",
              "rightValue": "NEEDS MODIFICATION",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -272,
        -1568
      ],
      "id": "424b0d66-ed2f-4b57-99a8-74454a9851b9",
      "name": "If1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "1b7b3e73-6867-4b4d-a184-d016241b74bf",
              "name": "public",
              "value": "=https://files.mohdasif.net{{ $('accounts').item.json.folder }}{{ $('pending_url').item.json.filename }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1232,
        -1632
      ],
      "id": "9a722e99-40d0-4653-8bf8-521f98bc9841",
      "name": "build_public_url"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "087647e1-c883-48ad-b04b-a2fce36eb524",
                    "leftValue": "={{ $('config').item.json.username }}",
                    "rightValue": "KahaniExpress",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "KahaniExpress"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "253761b6-dd64-4b7a-badb-afb1e73bfd90",
                    "leftValue": "={{ $('config').item.json.username }}",
                    "rightValue": "knowsparkz",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "knowsparkz"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        -80,
        -1808
      ],
      "id": "926f2345-b815-44fd-9729-274eb4d8f2a0",
      "name": "Switch1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "1b7b3e73-6867-4b4d-a184-d016241b74bf",
              "name": "final",
              "value": "=https://files.mohdasif.net{{ $('accounts').item.json.folder }}output/{{ $json.stdout }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        560,
        -2000
      ],
      "id": "6b4cd469-241a-41f3-a650-0a1f58d11884",
      "name": "build_final_url_mohd_asif"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "1b7b3e73-6867-4b4d-a184-d016241b74bf",
              "name": "public",
              "value": "=https://files.mohdasif.net/{{ $('accounts').item.json.folder }}{{ $('pending_url').item.json.filename }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1232,
        -1360
      ],
      "id": "f73418e9-b043-4b93-a692-cbf5f36c9b55",
      "name": "build_public_url1"
    },
    {
      "parameters": {
        "content": "",
        "height": 288,
        "width": 928
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1680,
        -1728
      ],
      "typeVersion": 1,
      "id": "487c0e68-200b-4aa1-a6a4-fcd28be1582c",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "url": "https://n8n.mohdasif.net/webhook/views",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"folder\": \"{{ $('accounts').item.json.folder }}\",\n  \"filename\": \"{{ $('Prepared').item.json.filename }}\",\n  \"root_dir\": \"{{ $('accounts').item.json.root_dir }}\"\n}\n",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        320,
        -1808
      ],
      "id": "e75a2291-85da-4f63-b9c4-1e9b08dfc020",
      "name": "MILLION_VIEWS"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "4e754235-9b9f-4f02-85b2-a52409c1e5e5",
              "leftValue": "={{ $('pending_url').item.json.final }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            },
            {
              "id": "c6d77762-53c7-484a-845c-b5f966a55a94",
              "leftValue": "={{ $('pending_url').item.json.final }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -1776,
        -2112
      ],
      "id": "725ccdf8-baea-4903-8a63-c16cae7e35b3",
      "name": "IF FINAL EMPTY1"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": false,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "4e754235-9b9f-4f02-85b2-a52409c1e5e5",
              "leftValue": "={{ $('pending_url').item.json.final }}",
              "rightValue": "NULL",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            },
            {
              "id": "c6d77762-53c7-484a-845c-b5f966a55a94",
              "leftValue": "={{ $('pending_url').item.json.final }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            },
            {
              "id": "77e77d0e-2901-4509-a300-882da8af1cf5",
              "leftValue": "={{ $('pending_url').item.json.final }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {
          "ignoreCase": true
        }
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -1552,
        -1424
      ],
      "id": "99da09c0-4791-4ea2-a64d-d6e992c8d867",
      "name": "IF FINAL EMPTY2"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "4e754235-9b9f-4f02-85b2-a52409c1e5e5",
              "leftValue": "={{ $('pending_url').item.json.final }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            },
            {
              "id": "c6d77762-53c7-484a-845c-b5f966a55a94",
              "leftValue": "={{ $('pending_url').item.json.final }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -1600,
        -1584
      ],
      "id": "a77a1caa-04f7-4187-ae50-1f4585b11281",
      "name": "IF FINAL EMPTY"
    },
    {
      "parameters": {
        "content": "",
        "height": 272,
        "width": 1408
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1872,
        -2208
      ],
      "typeVersion": 1,
      "id": "235fb084-2ec7-4e27-98b5-0bf2378f79b5",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "",
        "height": 288,
        "width": 928
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1664,
        -1408
      ],
      "typeVersion": 1,
      "id": "e4aaa099-dadc-4e2a-8c81-35fd0c6cf6b3",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"acc_id\": \"{{ String($('accounts').item.json.acc_id || '').trim() }}\",\n  \"username\": \"{{ String($('accounts').item.json.username || '').trim() }}\",\n  \"public\": \"{{ String($json.final || '').trim().replace(/\\\"/g, '') }}\",\n  \"access_token\": \"{{ String($('accounts').item.json.token || '').trim() }}\",\n  \"database_name\": \"{{ String($('accounts').item.json.database_name || '').trim() }}\",\n  \"status\": \"Pending\",\n  \"title\": {{ JSON.stringify(String($('config').item.json.title === true ? ($('pending_url').item.json.title || '') : ($('config').item.json.title || $('accounts').item.json.default_title || '')).trim()) }},\n  \"description\": {{ JSON.stringify(String($('config').item.json.description || $('accounts').item.json.default_des || '').trim()) }},\n  \"type\": \"{{ String($('config').item.json.type || '').trim() }}\",\n  \"id\": \"{{ String($json.id || '').trim() }}\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1184,
        -1504
      ],
      "id": "4f611c67-3303-4956-aa25-19c2bb486ba7",
      "name": "Execute"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "8s68NCy6GF9p0u8T",
          "mode": "list",
          "cachedResultUrl": "/workflow/8s68NCy6GF9p0u8T",
          "cachedResultName": "POST FACEBOOK - PARALLEL"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {}
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        1680,
        -1408
      ],
      "id": "bf794d56-b5a9-4a52-a291-d0c7989f2b78",
      "name": "Call 'POST FACEBOOK - PARALLEL'"
    },
    {
      "parameters": {
        "url": "=https://n8n.mohdasif.net/webhook/reaction2",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"folder\": \"{{ $('accounts').item.json.folder }}\",\n  \"filename\": \"{{ $('pending_url').item.json.filename }}\",\n  \"root_dir\": \"{{ $('accounts').item.json.root_dir }}\",\n  \"OVERLAY_FILE\":\"{{ $('accounts').item.json.root_dir }}tools/reaction/asif/new.mp4\"\n}\n",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        320,
        -2000
      ],
      "id": "7955f9f5-382f-436b-8ba3-302e3d5658db",
      "name": "KahaniExpress",
      "notes": "{\n  \"folder\": \"{{ $('accounts').item.json.folder }}\",\n  \"filename\": \"{{ $('pending_url').item.json.filename }}\",\n  \"root_dir\": \"{{ $('accounts').item.json.root_dir }}\",\n  \"OVERLAY_FILE\": \"{{ $('accounts').item.json.root_dir }}tools/reaction/asif/1.mp4\"\n}"
    },
    {
      "parameters": {
        "command": "=python3  {{ $json.file }} \\\n-i  {{ $json.input_image }} \\\n-b  {{ $json.input_video }} \\\n-o  {{ $json.output__video }} \\\n--cut-percentage 40 \\\n--cut-shape random \\\n--hole-color red \\\n--movement-style random \\\n--piece-scale 1.5 \\\n--fps 30 \\\n--margin-top 45 \\\n--audio-volume 10 \\\n--audio-file {{ $json.audio }} \\\n--audio-custom-volume 100 \\\n--alignment-hold-time 10 \\\n--image-coverage 95"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        -464,
        -2672
      ],
      "id": "76b69049-13df-427f-80e2-fae6b37813ab",
      "name": "command_t"
    },
    {
      "parameters": {
        "command": "=/bin/bash -lc 'cd /home/node/shared/python/games && mkdir -p outputs && /usr/bin/python3 game.py \\\n--falls 3 \\\n--hold-frames 15 \\\n--audio-bg \"files/audio.mp3\" \\\n--audio-bg-volume 0.8 \\\n--icon \"{{ $('accounts').item.json.root_dir }}/python/games/icons/{{ $('pending_url').item.json.image.match(/id=([^&]+)/)[1] }}.png\" \\\n--background \"{{ $('accounts').item.json.root_dir }}/python/games/temp.mp4\" \\\n--output-path \"{{ $('accounts').item.json.root_dir }}/python/games/outputs/{{ $('pending_url').item.json.image.match(/id=([^&]+)/)[1] }}.mp4\" \\\n--bg-video-mode \"full\" \\\n2>&1 | sed -n \"1,500p\"'"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        -1024,
        -2112
      ],
      "id": "94fbe188-9772-4f63-a809-2809e1f3db37",
      "name": "command"
    },
    {
      "parameters": {
        "url": "={{ $json.bg_video }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -928,
        -2448
      ],
      "id": "2552b100-7531-4711-9182-bdf4e076889c",
      "name": "Download Background"
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "={{ $('accounts').item.json.root_dir }}/python/games/temp.mp4",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        -752,
        -2448
      ],
      "id": "f5d7759d-0b33-487c-b4d2-cfba39eab84d",
      "name": "Read/Write Files from Disk1"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "SELECT *\nFROM accounts\nWHERE username = '{{ $json.username }}'\n  AND type = '{{ $json.type }}'\nLIMIT 1;",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -2560,
        -1536
      ],
      "id": "ac57d5bf-39e5-46e7-95a1-7cdab8e73760",
      "name": "accounts",
      "credentials": {
        "postgres": {
          "id": "NTm0aBQ2ka4qBTqV",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "SELECT *\nFROM {{ $('accounts').item.json.database_name }}\nWHERE  {{ $json.type }} IS NULL\n   OR {{ $json.type }} = ''\nORDER BY id ASC\nLIMIT 1;\n\n",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -2336,
        -1536
      ],
      "id": "252f31d7-6e2d-4778-bc97-c06d4840b608",
      "name": "pending_url",
      "credentials": {
        "postgres": {
          "id": "NTm0aBQ2ka4qBTqV",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "SELECT *\nFROM background\nWHERE puzzle = '' OR puzzle IS NULL\nLIMIT 1;\n",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -1120,
        -2448
      ],
      "id": "3136bfd8-a370-47f8-bdc7-c3c43e192847",
      "name": "select_bg",
      "credentials": {
        "postgres": {
          "id": "NTm0aBQ2ka4qBTqV",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "UPDATE \"background\"\nSET \"puzzle\" = 'DONE'\nWHERE \"id\" = {{ $node[\"select_bg\"].json[\"id\"] }};\n",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -864,
        -2112
      ],
      "id": "d70da784-36a9-4ecd-bba3-c9ff818831df",
      "name": "update_backgroubd_status",
      "credentials": {
        "postgres": {
          "id": "NTm0aBQ2ka4qBTqV",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "UPDATE {{ $('accounts').item.json.database_name }}\nSET public = '{{ (\n  \"https://files.mohdasif.net/python/games/outputs/\" +\n  (( $('pending_url').item.json.image.match(/id=([^&]+)/) || [null, \"NEEDS_MODIFICATION\"])[1]) +\n  \".mp4\"\n).replace(/'/g, \"''\") }}'\nWHERE id = {{ $('pending_url').item.json.id }};\n",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -672,
        -2112
      ],
      "id": "4a369b7b-e2d9-4ba0-8427-21d8bee2ada6",
      "name": "set_public_link",
      "credentials": {
        "postgres": {
          "id": "NTm0aBQ2ka4qBTqV",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "SELECT *\nFROM {{ $('accounts').item.json.database_name }}\nWHERE {{ $('config').item.json.type }} IS NULL\n   OR {{ $('config').item.json.type }} = ''\nORDER BY id ASC\nLIMIT 1;\n",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -448,
        -1568
      ],
      "id": "8c737af7-2eb2-49b1-b08c-c03e977eea83",
      "name": "Prepared",
      "credentials": {
        "postgres": {
          "id": "NTm0aBQ2ka4qBTqV",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "UPDATE {{ $('accounts').item.json.database_name }}\nSET public = '{{ $json.public }}'\nWHERE id = {{ $('pending_url').item.json.id }};",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -976,
        -1360
      ],
      "id": "5302fcc3-37fd-440a-bc6e-4c916cd18e19",
      "name": "INSERT_PUBLIC_ReelSense",
      "credentials": {
        "postgres": {
          "id": "NTm0aBQ2ka4qBTqV",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "UPDATE {{ $('accounts').item.json.database_name }}\nSET \n  public = '{{ $json.public }}',\n  final = 'NEEDS MODIFICATION'\nWHERE id = {{ $('pending_url').item.json.id }};\n",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -1008,
        -1632
      ],
      "id": "d77f6aab-395e-48a0-9fcb-f0b915d56db8",
      "name": "INSERT_PUBLIC",
      "credentials": {
        "postgres": {
          "id": "NTm0aBQ2ka4qBTqV",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "UPDATE {{ $('accounts').item.json.database_name }}\nSET \n  final = '{{ $('Prepared').item.json.public }}'\nWHERE \n  id = {{ $('pending_url').item.json.id }}",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        528,
        -1504
      ],
      "id": "ea6b4ea1-fdb1-4802-bb25-3024eedaf65f",
      "name": "final_url",
      "credentials": {
        "postgres": {
          "id": "NTm0aBQ2ka4qBTqV",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "UPDATE {{ $('accounts').item.json.database_name }}\nSET \n  final =  \"{{ $('build_final_url_mohd_asif').item.json.final }}\"\nWHERE id = {{ $('pending_url').item.json.id }};\n",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        768,
        -2000
      ],
      "id": "3d49fbd7-c84a-4691-9639-79f351d36ff0",
      "name": "INSERT_FINAL_MOHD_ASIF",
      "credentials": {
        "postgres": {
          "id": "NTm0aBQ2ka4qBTqV",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "SELECT *\nFROM {{ $('accounts').item.json.database_name }}\nWHERE {{ $('config').item.json.type }} IS NULL\n   OR {{ $('config').item.json.type }} = ''\nORDER BY id ASC\n\nLIMIT 1;\n",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        976,
        -1504
      ],
      "id": "b88f0e55-f1b4-4216-97f8-bacbf34f2587",
      "name": "After_mod_Prepared",
      "credentials": {
        "postgres": {
          "id": "NTm0aBQ2ka4qBTqV",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": false,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "7f8f923f-2327-498b-8c92-e632ee2050cf",
              "leftValue": "={{ $json.type }}",
              "rightValue": "youtube",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {
          "ignoreCase": true
        }
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1376,
        -1520
      ],
      "id": "eeecc214-a21d-4e82-92b7-19d661c29e52",
      "name": "If"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "5o6t5oIfRFT7p9Vr",
          "mode": "list",
          "cachedResultUrl": "/workflow/5o6t5oIfRFT7p9Vr",
          "cachedResultName": "YOUTUBE-MAX"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        1680,
        -1632
      ],
      "id": "aaaa6965-118f-44ba-b10e-392754e04409",
      "name": "Call Youtube Poster"
    }
  ],
  "origin": "n8n",
  "pinData": {
    "start": [
      {
        "json": {
          "username": "knowsparkz",
          "type": "fb",
          "title": false
        }
      }
    ]
  },
  "repo": {
    "owner": "hellomdasif",
    "name": "n8n-backup"
  },
  "settings": {
    "executionOrder": "v1",
    "callerPolicy": "workflowsFromSameOwner",
    "availableInMCP": false,
    "errorWorkflow": "o9ORuJvZYNmMmFfK",
    "executionTimeout": 600
  },
  "shared": [
    {
      "createdAt": "2025-10-07T03:09:18.159Z",
      "updatedAt": "2025-10-07T03:09:18.159Z",
      "role": "workflow:owner",
      "workflowId": "Kci6PSZkQ4DDd0qm",
      "projectId": "COQIBF46Vn0bg2e3"
    }
  ],
  "staticData": {
    "node:Schedule Trigger": {
      "recurrenceRules": [
        18
      ]
    }
  },
  "tags": [
    {
      "createdAt": "2025-10-07T12:13:49.553Z",
      "updatedAt": "2025-10-07T12:13:49.553Z",
      "id": "RDHUqhF8fggE5BPq",
      "name": "FACEBOOK-INSTA"
    }
  ],
  "triggerCount": 1,
  "updatedAt": "2025-10-17T09:13:47.000Z",
  "versionId": "f67936d7-697c-4ae2-a569-23369e816ff6"
}