{
  "active": false,
  "connections": {
    "‚úÖ Is Container Ready?": {
      "main": [
        [
          {
            "node": "Switch1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "anyError",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "‚è∞ Initial Processing Wait": {
      "main": [
        [
          {
            "node": "Check_Status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "‚è∞ Retry Wait Loop": {
      "main": [
        [
          {
            "node": "Check_Status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "anyError": {
      "main": [
        [
          {
            "node": "update_error",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "‚è∞ Retry Wait Loop",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "update_sucess": {
      "main": [
        [
          {
            "node": "LOG",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "upload": {
      "main": [
        [
          {
            "node": "set2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check_Status": {
      "main": [
        [
          {
            "node": "‚úÖ Is Container Ready?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Publish": {
      "main": [
        [
          {
            "node": "update_sucess",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "update_error": {
      "main": [
        [
          {
            "node": "LOG",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üì§ Publish via HTTP API": {
      "main": [
        [
          {
            "node": "update_sucess",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "get_container_id_insta",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "get_container_id_fb",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch1": {
      "main": [
        [
          {
            "node": "üì§ Publish via HTTP API",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Publish",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get_container_id_fb": {
      "main": [
        [
          {
            "node": "upload",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get_container_id_insta": {
      "main": [
        [
          {
            "node": "set1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "set2": {
      "main": [
        [
          {
            "node": "‚è∞ Initial Processing Wait",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "set1": {
      "main": [
        [
          {
            "node": "‚è∞ Initial Processing Wait",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-10-07T18:09:57.362Z",
  "id": "8s68NCy6GF9p0u8T",
  "isArchived": false,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "POST FACEBOOK - PARALLEL",
  "nodes": [
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": false,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "682def4c-2cda-4417-9329-682a8a60feed",
              "leftValue": "={{ JSON.stringify($json.status) }}",
              "rightValue": "upload_complete",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            },
            {
              "id": "b7fa2490-02f3-409a-8bf0-5ffab4acf9b9",
              "leftValue": "={{ JSON.stringify($json.status) }}",
              "rightValue": "Finished",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {
          "ignoreCase": true
        }
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -416,
        -2128
      ],
      "id": "75d61b7d-bcac-417e-bd05-c1b32d796682",
      "name": "‚úÖ Is Container Ready?"
    },
    {
      "parameters": {
        "amount": 30
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        -864,
        -2064
      ],
      "id": "060be128-be2b-4ad5-81fa-d6a529dd502d",
      "name": "‚è∞ Initial Processing Wait",
      "webhookId": "1c31a965-a646-4247-8591-bdbfdfd44f56"
    },
    {
      "parameters": {
        "amount": 1,
        "unit": "minutes"
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        32,
        -1776
      ],
      "id": "c3a9e782-374e-4e36-8b93-07f91ee52e39",
      "name": "‚è∞ Retry Wait Loop",
      "webhookId": "ec9f9eba-de1d-4683-b6b7-bfddeb111ca3"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": false,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "682def4c-2cda-4417-9329-682a8a60feed",
              "leftValue": "={{ $json.status.video_status }}",
              "rightValue": "error",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {
          "ignoreCase": true
        }
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -192,
        -1936
      ],
      "id": "a0db73cb-3992-4802-9451-c58531e5a374",
      "name": "anyError"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "UPDATE {{ $('Loop Over Items').item.json.database_name }}\nSET  {{ $('Loop Over Items').item.json.type }}= 'DONE'\nWHERE id = '{{ $('Loop Over Items').item.json.id }}';\n",
        "options": {}
      },
      "type": "n8n-nodes-base.mySql",
      "typeVersion": 2.5,
      "position": [
        256,
        -2272
      ],
      "id": "34820bec-5de2-4ae7-b392-47a1b33fbe0c",
      "name": "update_sucess",
      "credentials": {
        "mySql": {
          "id": "aH3xsjJBm3OWPFrR",
          "name": "MySQL account"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $('get_container_id_fb').item.json.upload_url }}",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "access_token",
              "value": "={{ $('Loop Over Items').item.json.access_token }}"
            }
          ]
        },
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "file_url",
              "value": "={{ $('Loop Over Items').item.json.public }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -1312,
        -1968
      ],
      "id": "caae9922-2157-4e58-bf1c-7323c215c02c",
      "name": "upload"
    },
    {
      "parameters": {
        "url": "=https://graph.facebook.com/v23.0/{{ $json.id }}",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "fields",
              "value": "status"
            },
            {
              "name": "access_token",
              "value": "={{ $('Loop Over Items').item.json.access_token }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -640,
        -2064
      ],
      "id": "0ce2db2b-0c03-4bd5-8566-225c97ca4e66",
      "name": "Check_Status"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://graph.facebook.com/v23.0//{{ $('Loop Over Items').item.json.acc_id }}/video_reels",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "access_token",
              "value": "={{ $('Loop Over Items').item.json.access_token }}"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"video_id\": \"{{ $json.id }}\",\n  \"upload_phase\": \"finish\",\n  \"video_state\": \"PUBLISHED\",\n  \"description\": \"{{ $('Loop Over Items').item.json.title.replace(/\\n/g, ' ') }}\"\n}\n\n",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        32,
        -2176
      ],
      "id": "ec28c8a2-9c9b-4760-bd75-ae275a3b3815",
      "name": "Publish"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "UPDATE {{ $('check_process_list').item.json.database_name }}\nSET fb = 'ERROR'\nWHERE public = '{{ $('check_process_list').item.json.public }}';\n",
        "options": {}
      },
      "type": "n8n-nodes-base.mySql",
      "typeVersion": 2.5,
      "position": [
        32,
        -1984
      ],
      "id": "5b76939c-b52d-4b55-9f3a-fe6b2f02a500",
      "name": "update_error",
      "credentials": {
        "mySql": {
          "id": "aH3xsjJBm3OWPFrR",
          "name": "MySQL account"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://graph.facebook.com/v22.0/{{ $('Loop Over Items').item.json.acc_id }}/media_publish",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "creation_id",
              "value": "={{ $json.id }}"
            },
            {
              "name": "access_token",
              "value": "={{ $('Loop Over Items').item.json.access_token }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        32,
        -2368
      ],
      "id": "11ebdbcb-745a-4be8-80f0-8ac6fcdcbeb8",
      "name": "üì§ Publish via HTTP API"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Loop Over Items').item.json.type }}",
                    "rightValue": "insta",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "d67cc145-9ea5-401d-b37f-ec122bbb5696"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "1deeb985-1ac3-422e-92e1-4e8b406b88b8",
                    "leftValue": "={{ $('Loop Over Items').item.json.type }}",
                    "rightValue": "fb",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        -1760,
        -2048
      ],
      "id": "cc038230-f314-43cc-9d1c-9aaa15455770",
      "name": "Switch"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Loop Over Items').item.json.type }}",
                    "rightValue": "insta",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "d67cc145-9ea5-401d-b37f-ec122bbb5696"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "1deeb985-1ac3-422e-92e1-4e8b406b88b8",
                    "leftValue": "={{ $('Loop Over Items').item.json.type }}",
                    "rightValue": "fb",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        -192,
        -2272
      ],
      "id": "53bdabe2-78e9-49cc-bc99-e9644dfcfdd2",
      "name": "Switch1"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://graph.facebook.com/v23.0/{{ $('Loop Over Items').item.json.acc_id }}/video_reels",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "access_token",
              "value": "={{ $('Loop Over Items').item.json.access_token }}"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n   \"upload_phase\":\"start\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -1536,
        -1968
      ],
      "id": "68e33588-69e0-4bd6-91d5-387e8a25ddaf",
      "name": "get_container_id_fb"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://graph.facebook.com/v22.0/{{ $('Loop Over Items').item.json.acc_id }}/media",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "media_type",
              "value": "REELS"
            },
            {
              "name": "video_url",
              "value": "={{ $('Loop Over Items').item.json.public }}"
            },
            {
              "name": "caption",
              "value": "={{ $('Loop Over Items').item.json.description }}"
            },
            {
              "name": "access_token",
              "value": "={{ $('Loop Over Items').item.json.access_token }}"
            },
            {
              "name": "audio_name",
              "value": "={{ $('Loop Over Items').item.json.username }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -1312,
        -2160
      ],
      "id": "18aae23d-9e8b-4145-a78b-6c590f6cb4ef",
      "name": "get_container_id_insta"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "016dbdd3-7b5a-48fa-b1bc-640d629b1fa5",
              "name": "id",
              "value": "={{ $('get_container_id_fb').item.json.video_id }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1088,
        -1968
      ],
      "id": "ccfcbb3e-5a50-4e8f-be05-c65e782657cb",
      "name": "set2"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "016dbdd3-7b5a-48fa-b1bc-640d629b1fa5",
              "name": "id",
              "value": "={{ $json.id }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1088,
        -2160
      ],
      "id": "91884857-ffaf-4557-afe3-7f7957748840",
      "name": "set1"
    },
    {
      "parameters": {
        "inputSource": "passthrough"
      },
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1.1,
      "position": [
        -1936,
        -2048
      ],
      "id": "dc0d2345-319a-45f0-ae99-bbdfe3e082db",
      "name": "Loop Over Items"
    },
    {
      "parameters": {
        "dataTableId": {
          "__rl": true,
          "value": "4R0Z8jKlxBbX97in",
          "mode": "list",
          "cachedResultName": "LOG",
          "cachedResultUrl": "/projects/COQIBF46Vn0bg2e3/datatables/4R0Z8jKlxBbX97in"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "username": "={{ $('Loop Over Items').item.json.username }}",
            "public": "={{ $('Loop Over Items').item.json.public }}",
            "type": "={{ $('Loop Over Items').item.json.type }}",
            "row_id": "={{ $('Loop Over Items').item.json.id }}",
            "acc_id": "={{ $('Loop Over Items').item.json.acc_id }}",
            "time": "={{ new Date().toLocaleString('en-GB', { day: 'numeric', month: 'short' }) + ' [' + new Date().toLocaleString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true }) + ']' }}",
            "title": "={{ $('Loop Over Items').item.json.title }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "username",
              "displayName": "username",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "public",
              "displayName": "public",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "type",
              "displayName": "type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "acc_id",
              "displayName": "acc_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "row_id",
              "displayName": "row_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "time",
              "displayName": "time",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "title",
              "displayName": "title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        528,
        -2160
      ],
      "id": "6a10b515-e118-462c-bf8b-5cda2620177d",
      "name": "LOG"
    }
  ],
  "origin": "n8n",
  "pinData": {
    "Loop Over Items": [
      {
        "json": {
          "acc_id": "102723221205773",
          "username": "knowsparkz",
          "public": "NEEDS MODIFICATION",
          "access_token": "EAAZAD11ycW5IBPq0B14m9pLjFhI7A2cevfVH5XEYJ85dZATwMc0MFpIZCIagWYZA86R5xIcfAcSoAlwWVaOATf4ERgjMOkPScPAqag31h6nSZCa66e033wUKa3zgu08zI76ccfshLzuhbxlqDJrUD20nYkNoivDYEwxr9ZCkANumsXaIS8ZCg5yeIT1Bwcm8LdGoCUaL14ZD",
          "database_name": "knowsparkz",
          "status": "Pending",
          "title": "#trendingreel #facebookviral #tvshowinspired #visualcontent #facts",
          "description": "#trendingreel #facebookviral #tvshowinspired #visualcontent #facts",
          "type": "fb",
          "id": "50"
        }
      }
    ]
  },
  "repo": {
    "owner": "hellomdasif",
    "name": "n8n-backup"
  },
  "settings": {
    "executionOrder": "v1",
    "callerPolicy": "workflowsFromSameOwner",
    "availableInMCP": false,
    "errorWorkflow": "o9ORuJvZYNmMmFfK",
    "executionTimeout": 600
  },
  "shared": [
    {
      "createdAt": "2025-10-07T18:09:57.368Z",
      "updatedAt": "2025-10-07T18:09:57.368Z",
      "role": "workflow:owner",
      "workflowId": "8s68NCy6GF9p0u8T",
      "projectId": "COQIBF46Vn0bg2e3"
    }
  ],
  "staticData": {
    "node:Schedule Trigger": {
      "recurrenceRules": [
        18
      ]
    },
    "node:Google Sheets Trigger": {
      "documentId": "1xiPfhzJCG69yDe8NUAykc9W4sT4AazIo3GGep4oXv0k",
      "sheetId": 0,
      "lastRevision": 69,
      "lastRevisionLink": "https://docs.google.com/spreadsheets/export?id=1xiPfhzJCG69yDe8NUAykc9W4sT4AazIo3GGep4oXv0k&revision=69&exportFormat=xlsx"
    }
  },
  "tags": [
    {
      "createdAt": "2025-10-07T12:13:49.553Z",
      "updatedAt": "2025-10-07T12:13:49.553Z",
      "id": "RDHUqhF8fggE5BPq",
      "name": "FACEBOOK-INSTA"
    }
  ],
  "triggerCount": 0,
  "updatedAt": "2025-10-16T09:09:18.000Z",
  "versionId": "27e77b50-ebd7-4b7c-b38e-71d0f912cf20"
}