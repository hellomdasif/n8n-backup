{
  "active": true,
  "connections": {
    "Respond to Webhook": {
      "main": [
        []
      ]
    },
    "set_public_link": {
      "main": [
        [
          {
            "node": "pre",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "accounts": {
      "main": [
        [
          {
            "node": "pending_url",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "data": {
      "main": [
        [
          {
            "node": "final_data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "pre": {
      "main": [
        [
          {
            "node": "data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "final_data": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "accounts",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Random_objects1": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Random_videos1": {
      "main": [
        [
          {
            "node": "Random_objects1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "pending_url": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "dir",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "pre",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "pendulum": {
      "main": [
        [
          {
            "node": "set_public_link",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "dir": {
      "main": [
        [
          {
            "node": "Random_videos1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "config1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "config2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Type1-Dropping": {
      "main": [
        [
          {
            "node": "set_public_link",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "config1": {
      "main": [
        [
          {
            "node": "Type1-Dropping",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "config2": {
      "main": [
        [
          {
            "node": "pendulum",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-10-18T06:55:39.163Z",
  "id": "6YmkO6iyZbS18Lti",
  "isArchived": false,
  "meta": null,
  "name": "puzzle",
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        2000,
        -1840
      ],
      "id": "eafd07cc-ad04-482d-8579-bb1fef17a915",
      "name": "Respond to Webhook"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "UPDATE {{ $('accounts').item.json.database_name }}\nSET public ='{{ $json.stdout }}'\nWHERE id = {{ $('Webhook').item.json.body.id }};\n",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        1104,
        -1904
      ],
      "id": "d53787f8-4692-4cc8-af61-b576f40cdf3e",
      "name": "set_public_link",
      "credentials": {
        "postgres": {
          "id": "NTm0aBQ2ka4qBTqV",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "SELECT *\nFROM accounts\nWHERE username = '{{ $json.body.username }}'\n  AND type = '{{ $json.body.type }}'\nLIMIT 1;",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -912,
        -1840
      ],
      "id": "0a17713a-7b0c-4d51-875e-8e4afe0f630a",
      "name": "accounts",
      "credentials": {
        "postgres": {
          "id": "NTm0aBQ2ka4qBTqV",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "BsyOPmLgdOcI8rtZ",
          "mode": "list",
          "cachedResultUrl": "/workflow/BsyOPmLgdOcI8rtZ",
          "cachedResultName": "getData"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {}
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        1552,
        -1840
      ],
      "id": "d2e717ca-ecd7-402d-a5a6-b530efc54c55",
      "name": "data"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"username\": \"{{ $('Webhook').item.json.body.username }}\",\n  \"type\": \"{{ $('Webhook').item.json.body.type }}\",\n  \"title\":\"{{ $('Webhook').item.json.body.title }}\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1328,
        -1840
      ],
      "id": "985e34c1-9f0d-437b-8182-a4a507a2fab3",
      "name": "pre"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"acc_id\": \"{{ String($('data').item.json.accounts[0].acc_id || '').trim() }}\",\n  \"username\": \"{{ String($('data').item.json.accounts[0].username || '').trim() }}\",\n  \"public\": \"{{ String($('data').item.json.pending_url[0].public || '').trim() }}\",\n  \"access_token\": \"{{ String($('data').item.json.accounts[0].token || '').trim() }}\",\n  \"database_name\": \"{{ String($('data').item.json.accounts[0].database_name || '').trim() }}\",\n  \"title\": {{\n    JSON.stringify(\n      String(\n        $('pre').item.json.title === 'false'\n          ? $('data').item.json.accounts[0].default_title\n          : ($('pre').item.json.title === 'true'\n              ? $('data').item.json.pending_url[0].title\n              : $('pre').item.json.title)\n      ).trim()\n    )\n  }},\n  \"description\": {{\n    JSON.stringify(\n      String(\n        $('pre').item.json.description\n          || $('data').item.json.accounts[0].default_des\n          || ''\n      ).trim()\n    )\n  }},\n  \"type\": \"{{ String($('pre').item.json.type || '').trim() }}\",\n  \"id\": \"{{ $('data').item.json.pending_url[0].id }}\",\n  \"folder\": \"{{ String($('data').item.json.accounts[0].folder || '').trim() }}\",\n  \"filename\": \"{{ String($('data').item.json.pending_url[0].filename || '').trim() }}\",\n  \"root_dir\": \"{{ String($('data').item.json.accounts[0].root_dir || '').trim() }}\",\n  \"files_url\": \"{{ String($('data').item.json.accounts[0].files_url || '').trim() }}\"\n}\n",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1776,
        -1840
      ],
      "id": "36400107-b8b1-43b5-9424-d2849aeff0ce",
      "name": "final_data",
      "notes": "{\n  \"acc_id\": \"{{ String($('accounts').item.json.acc_id || '').trim() }}\",\n  \"username\": \"{{ String($('accounts').item.json.username || '').trim() }}\",\n  \"public\": \"https://files.mohdasif.net/{{ $json.modified }}\",\n  \"access_token\": \"{{ String($('accounts').item.json.token || '').trim() }}\",\n  \"database_name\": \"{{ String($('accounts').item.json.database_name || '').trim() }}\",\n  \"status\": \"Pending\",\n  \"title\": \"{{ $('start').item.json.title === 'false' ? $('accounts').item.json.default_title : $('start').item.json.title }}\",\n  \"description\": {{ JSON.stringify(String($('start').item.json.description || $('accounts').item.json.default_des || '').trim()) }},\n  \"type\": \"{{ String($('start').item.json.type || '').trim() }}\",\n  \"id\": \"{{ $('pending_url').item.json.id }}\"\n}"
    },
    {
      "parameters": {
        "path": "puzzle",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -1136,
        -1840
      ],
      "id": "2c76931a-0ad6-4cdc-8ba9-12048766c6c0",
      "name": "Webhook",
      "webhookId": "76a11a5b-03bf-4a8e-b79b-2bf1e53c1579"
    },
    {
      "parameters": {
        "command": "=bash -eu <<'BASH'\n# ===== CONFIG =====\nDIR=\"{{ $('dir').item.json.dir_obj }}\"    # main folder\nPROCDIR=\"$DIR/processed\"                      # processed/ (locked files live here)\nEXT=\"jpg|png|mp4\"                             # allowed extensions (regex, e.g. \"jpg|png|mp4\")\n# ===================\n\nmkdir -p \"$DIR\" \"$PROCDIR\"\n\n# helper to list matching files (top-level only), returns null-separated array\nlist_files() {\n  local arr\n  # Use posix-extended regex type for clearer grouping\n  mapfile -d '' -t arr < <(find \"$DIR\" -maxdepth 1 -type f -regextype posix-extended -iregex \".*\\.($EXT)$\" -print0)\n  printf \"%s\\n\" \"${arr[@]-}\"\n}\n\n# helper to list processed files\nlist_processed() {\n  local p_arr\n  mapfile -d '' -t p_arr < <(find \"$PROCDIR\" -maxdepth 1 -type f -print0)\n  printf \"%s\\n\" \"${p_arr[@]-}\"\n}\n\n# 1) If no files in DIR matching EXT, move everything from processed back to DIR (reset)\nmapfile -d '' -t all < <(find \"$DIR\" -maxdepth 1 -type f -regextype posix-extended -iregex \".*\\.($EXT)$\" -print0)\nif [ ${#all[@]} -eq 0 ]; then\n  # check processed folder\n  shopt -s nullglob\n  files=( \"$PROCDIR\"/* )\n  if [ ${#files[@]} -gt 0 ]; then\n    for f in \"${files[@]}\"; do\n      # move back; if any mv fails, report and exit non-zero\n      mv -- \"$f\" \"$DIR/\" || { echo \"__RESET_PARTIAL_FAIL__:$(basename \"$f\")\"; exit 2; }\n    done\n    # refresh list after reset\n    mapfile -d '' -t all < <(find \"$DIR\" -maxdepth 1 -type f -regextype posix-extended -iregex \".*\\.($EXT)$\" -print0)\n    echo \"RESET_DONE\"\n    # continue to picking below (we intentionally do not exit)\n  else\n    # nothing anywhere\n    echo \"__NO_FILES_ANYWHERE__\"\n    exit 0\n  fi\nfi\n\n# At this point 'all' should contain candidate files in DIR\nif [ ${#all[@]} -eq 0 ]; then\n  # defensive - if still empty after attempted reset\n  echo \"__NO_FILES_AFTER_RESET__\"\n  exit 0\nfi\n\n# 2) pick a random file\nif command -v shuf >/dev/null 2>&1; then\n  selected=\"$(printf \"%s\\n\" \"${all[@]}\" | shuf -n1)\"\nelse\n  idx=$(( RANDOM % ${#all[@]} ))\n  selected=\"${all[$idx]}\"\nfi\n\nfilename=\"$(basename -- \"$selected\")\"\nsrcpath=\"$selected\"\nlockpath=\"$PROCDIR/$filename\"\n\n# 3) atomic move to processed (acts as a lock). If mv fails -> race/perm error\nif ! mv -- \"$srcpath\" \"$lockpath\"; then\n  echo \"__MV_FAILED__:$filename\"\n  exit 2\nfi\n\n# 4) ensure rollback on any processing error — move file back to DIR\nrollback() {\n  if [ -e \"$lockpath\" ]; then\n    mv -- \"$lockpath\" \"$DIR/\" || echo \"__ROLLBACK_FAILED__:$filename\"\n  fi\n}\ntrap 'rollback; exit 2' ERR\n\n# ====== YOUR PROCESSING COMMANDS START HERE ======\n# Replace the example below with your real commands (ffmpeg, convert, upload, etc.)\n# Example placeholders:\n#  - For video (mp4): ffmpeg -y -i \"$lockpath\" -vf \"scale=1280:-1\" \"/home/node/shared/YOUTUBE/output/${filename%.*}_resized.mp4\"\n#  - For image (jpg/png): convert \"$lockpath\" -resize 1080x1080 \"/home/node/shared/YOUTUBE/output/${filename%.*}_thumb.jpg\"\n\n# ---- BEGIN PROCESS (REPLACE THIS BLOCK) ----\n# Simulate processing; replace 'true' with your commands.\n# If any command returns non-zero, trap will run rollback and exit non-zero.\ntrue\n# ---- END PROCESS (REPLACE THIS BLOCK) ----\n# ===============================================\n\n# on success, remove trap and report OK\ntrap - ERR\necho \"$filename\"\nexit 0\nBASH"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        208,
        -1904
      ],
      "id": "31d88180-c0db-4140-998f-3e7c7584085c",
      "name": "Random_objects1"
    },
    {
      "parameters": {
        "command": "=bash -eu <<'BASH'\n# ===== CONFIG =====\nDIR=\"{{ $json.dir_video }}\"    # main folder\nPROCDIR=\"$DIR/processed\"                      # processed/ (locked files live here)\nEXT=\"jpg|png|mp4\"                             # allowed extensions (regex, e.g. \"jpg|png|mp4\")\n# ===================\n\nmkdir -p \"$DIR\" \"$PROCDIR\"\n\n# helper to list matching files (top-level only), returns null-separated array\nlist_files() {\n  local arr\n  # Use posix-extended regex type for clearer grouping\n  mapfile -d '' -t arr < <(find \"$DIR\" -maxdepth 1 -type f -regextype posix-extended -iregex \".*\\.($EXT)$\" -print0)\n  printf \"%s\\n\" \"${arr[@]-}\"\n}\n\n# helper to list processed files\nlist_processed() {\n  local p_arr\n  mapfile -d '' -t p_arr < <(find \"$PROCDIR\" -maxdepth 1 -type f -print0)\n  printf \"%s\\n\" \"${p_arr[@]-}\"\n}\n\n# 1) If no files in DIR matching EXT, move everything from processed back to DIR (reset)\nmapfile -d '' -t all < <(find \"$DIR\" -maxdepth 1 -type f -regextype posix-extended -iregex \".*\\.($EXT)$\" -print0)\nif [ ${#all[@]} -eq 0 ]; then\n  # check processed folder\n  shopt -s nullglob\n  files=( \"$PROCDIR\"/* )\n  if [ ${#files[@]} -gt 0 ]; then\n    for f in \"${files[@]}\"; do\n      # move back; if any mv fails, report and exit non-zero\n      mv -- \"$f\" \"$DIR/\" || { echo \"__RESET_PARTIAL_FAIL__:$(basename \"$f\")\"; exit 2; }\n    done\n    # refresh list after reset\n    mapfile -d '' -t all < <(find \"$DIR\" -maxdepth 1 -type f -regextype posix-extended -iregex \".*\\.($EXT)$\" -print0)\n    echo \"RESET_DONE\"\n    # continue to picking below (we intentionally do not exit)\n  else\n    # nothing anywhere\n    echo \"__NO_FILES_ANYWHERE__\"\n    exit 0\n  fi\nfi\n\n# At this point 'all' should contain candidate files in DIR\nif [ ${#all[@]} -eq 0 ]; then\n  # defensive - if still empty after attempted reset\n  echo \"__NO_FILES_AFTER_RESET__\"\n  exit 0\nfi\n\n# 2) pick a random file\nif command -v shuf >/dev/null 2>&1; then\n  selected=\"$(printf \"%s\\n\" \"${all[@]}\" | shuf -n1)\"\nelse\n  idx=$(( RANDOM % ${#all[@]} ))\n  selected=\"${all[$idx]}\"\nfi\n\nfilename=\"$(basename -- \"$selected\")\"\nsrcpath=\"$selected\"\nlockpath=\"$PROCDIR/$filename\"\n\n# 3) atomic move to processed (acts as a lock). If mv fails -> race/perm error\nif ! mv -- \"$srcpath\" \"$lockpath\"; then\n  echo \"__MV_FAILED__:$filename\"\n  exit 2\nfi\n\n# 4) ensure rollback on any processing error — move file back to DIR\nrollback() {\n  if [ -e \"$lockpath\" ]; then\n    mv -- \"$lockpath\" \"$DIR/\" || echo \"__ROLLBACK_FAILED__:$filename\"\n  fi\n}\ntrap 'rollback; exit 2' ERR\n\n# ====== YOUR PROCESSING COMMANDS START HERE ======\n# Replace the example below with your real commands (ffmpeg, convert, upload, etc.)\n# Example placeholders:\n#  - For video (mp4): ffmpeg -y -i \"$lockpath\" -vf \"scale=1280:-1\" \"/home/node/shared/YOUTUBE/output/${filename%.*}_resized.mp4\"\n#  - For image (jpg/png): convert \"$lockpath\" -resize 1080x1080 \"/home/node/shared/YOUTUBE/output/${filename%.*}_thumb.jpg\"\n\n# ---- BEGIN PROCESS (REPLACE THIS BLOCK) ----\n# Simulate processing; replace 'true' with your commands.\n# If any command returns non-zero, trap will run rollback and exit non-zero.\ntrue\n# ---- END PROCESS (REPLACE THIS BLOCK) ----\n# ===============================================\n\n# on success, remove trap and report OK\ntrap - ERR\necho \"$filename\"\nexit 0\nBASH"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        -16,
        -1904
      ],
      "id": "069db847-278a-4cc4-845d-f35a5fc77a65",
      "name": "Random_videos1"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "SELECT *\nFROM {{ $('accounts').item.json.database_name }}\nWHERE  {{ $json.type }} IS NULL\n   OR {{ $json.type }} = ''\nORDER BY id ASC\nLIMIT 1;\n\n",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -688,
        -1840
      ],
      "id": "264168ca-aa2f-4125-b6fc-d4ab338437dd",
      "name": "pending_url",
      "credentials": {
        "postgres": {
          "id": "NTm0aBQ2ka4qBTqV",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "3aae607b-3caf-4e44-b1f5-df1d4b6cfe3f",
              "leftValue": "={{ $json.public }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            },
            {
              "id": "5040cb1c-b1ad-4dfc-8c5c-5941ddbbb72d",
              "leftValue": "={{ $json.public }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -464,
        -1840
      ],
      "id": "e9d69f72-531f-4ed8-97ba-2c59d1016c6d",
      "name": "If"
    },
    {
      "parameters": {
        "command": "=python3 -u \"{{ $json.py }}\" \\\n  --object \"{{ $('dir').item.json.dir_obj }}/processed/{{ $('Random_objects1').item.json.stdout }}\" \\\n  --background \"{{ $json.bgvideo }}\" \\\n  --shape \"{{ (() => { \n      const s = ['triangle','square','pentagon','hexagon','heptagon','octagon','nonagon','decagon','circle','star','diamond'];\n      return s[Math.floor(Math.random() * s.length)]; \n    })() }}\" \\\n  --output \"{{ $json['output-path'] }}\" \\\n  1>/dev/null\n\n# stdout should be ONLY the final URL:\nprintf \"%s\" \"{{ $json['finalurl'] }}\"\n"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        896,
        -1712
      ],
      "id": "92477bff-3e94-4c54-904e-6c6ae0ed9ae2",
      "name": "pendulum",
      "notes": "cd /home/node/shared/python/pendulum && python3 generate.py --object \"/home/node/shared/files/icons/processed/{{ $('Random_objects1').item.json.stdout }}\" --background assets/bg.mp4 --shape \"{{ (() => { const s = ['triangle','square','pentagon','hexagon','heptagon','octagon','nonagon','decagon','circle','star','diamond']; return s[Math.floor(Math.random()*s.length)]; })() }}\" --output \"/home/node/shared/files/icons/output/puzzle2.mp4\" --dim-amount 0.8\n\nworking =>\n\ncd /home/node/shared/python/pendulum && python3 generate.py --object \"/home/node/shared/files/icons/processed/{{ $('Random_objects1').item.json.stdout }}\" --background assets/bg.mp4 --shape \"{{ (() => { const s = ['triangle','square','pentagon','hexagon','heptagon','octagon','nonagon','decagon','circle','star','diamond']; return s[Math.floor(Math.random()*s.length)]; })() }}\" --output \"/home/node/shared/files/output/{{ $('Random_videos1').item.json.stdout }}\" --dim-amount 0.9"
    },
    {
      "parameters": {
        "jsCode": "const input = $('accounts').first().json.username;\n\n// Helper to pick a random element\nconst pickRandom = arr => arr[(Math.random() * arr.length) | 0];\nconst folders = [\"animal\", \"icons\"];\n\n// Example: use random folder everywhere you want\nconst randomFolder = pickRandom(folders);\n\n// --- your existing code above ---\n\nif (input === \"paheli\") {\n  dir_video = \"/home/node/shared/files/bgvideo\";\n  dir_obj   = `/home/node/shared/files/${randomFolder}`;\n} \nelse if (input === \"urban__raja\") {\n  dir_video = \"/home/node/shared/files/bgvideo\";\n  dir_obj   = `/home/node/shared/files/${randomFolder}`;\n}\nelse if (input.category === \"instagram\") {\n  dir_video = \"/home/node/shared/INSTAGRAM/bgvideo\";\n  dir_obj   = `/home/node/shared/INSTAGRAM/${randomFolder}`;\n} \nelse {\n  dir_video = `/home/node/shared/files/${input.category}/bgvideo`;\n  // If you want random here too, ignore \"icons\" and use the random pick:\n  dir_obj   = `/home/node/shared/files/${randomFolder}`;\n  // Or, if you still want category-based:\n  // dir_obj = `/home/node/shared/files/${input.category}/${randomFolder}`;\n}\n\n// Return for next node\nreturn [{ json: { dir_video, dir_obj } }];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -240,
        -1904
      ],
      "id": "c1771875-3e1e-4bd2-9829-156bffef4fda",
      "name": "dir"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "15ad7f17-1811-4222-9556-231659b5fefe",
                    "leftValue": "={{ $('accounts').item.json.username }}",
                    "rightValue": "urban__raja",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "urban__raja"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "d1b641c3-b392-4897-9dc1-2ba8e74eb03d",
                    "leftValue": "={{ $('accounts').item.json.username }}",
                    "rightValue": "paheli",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "अम्माजी की पहेली "
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        432,
        -1904
      ],
      "id": "46163499-e578-45b2-9dc3-48e3a3fa9c23",
      "name": "Switch"
    },
    {
      "parameters": {
        "command": "=python3 -u \"{{ $json.py }}\" \\\n  --falls 4 \\\n  --hold-frames 15 \\\n  --audio-bg \"{{ $json['audio-bg'] }}\" \\\n  --audio-bg-volume 0.8 \\\n  --icon \"{{ $json.object }}\" \\\n  --background \"{{ $json.bgvideo }}\" \\\n  --output-path \"{{ $json['output-path'] }}\" \\\n  --bg-video-mode \"full\" \\\n1>&2\n\n# now stdout is JUST the variable (as JSON)\nfinalurl=\"{{ $json['finalurl'] }}\"\nprintf  \"$finalurl\"\n"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        880,
        -2000
      ],
      "id": "3705781e-3a3f-441d-8985-4320b822413d",
      "name": "Type1-Dropping"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"audio-bg\": \"/home/node/shared/script/puzzle/Type1/files/audio.mp3\",\n  \"py\": \"/home/node/shared/script/puzzle/Type1/dropping.py\",\n  \"object\": \"{{ $('dir').item.json.dir_obj }}/processed/{{ $('Random_objects1').item.json.stdout }}\",\n  \"bgvideo\": \"{{ $('accounts').item.json.root_dir }}files/bgvideo/processed/{{ $('Random_videos1').item.json.stdout }}\",\n  \"output-path\": \"{{ $('accounts').item.json.root_dir }}/output/{{ $('accounts').item.json.username }}/{{ $('Random_videos1').item.json.stdout }}\",\n\"finalurl\":\"https://files.mohdasif.net//output/{{ $('accounts').item.json.username }}/{{ $('Random_videos1').item.json.stdout }}\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        656,
        -2000
      ],
      "id": "5b6943ba-5f2e-4f54-9bde-6a569392f830",
      "name": "config1"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"py\": \"{{ $('accounts').item.json.root_dir }}/script/puzzle/Type2/dadi.py\",\n   \"object\": \"{{ $('dir').item.json.dir_obj }}/processed/{{ $('Random_objects1').item.json.stdout }}\",\n  \"bgvideo\": \"{{ $('accounts').item.json.root_dir }}/script/puzzle/Type2/files/bg.mp4\",\n  \"output-path\": \"{{ $('accounts').item.json.root_dir }}/output/{{ $('accounts').item.json.username }}/{{ $('Random_videos1').item.json.stdout }}\",\n\"finalurl\":\"https://files.mohdasif.net//output/{{ $('accounts').item.json.username }}/{{ $('Random_videos1').item.json.stdout }}\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        672,
        -1712
      ],
      "id": "cc70d746-8ae6-411e-bcbc-244c8a9fc272",
      "name": "config2"
    }
  ],
  "origin": "n8n",
  "pinData": {},
  "repo": {
    "owner": "hellomdasif",
    "name": "n8n-backup"
  },
  "settings": {
    "executionOrder": "v1",
    "callerPolicy": "workflowsFromSameOwner",
    "availableInMCP": false,
    "errorWorkflow": "o9ORuJvZYNmMmFfK"
  },
  "shared": [
    {
      "createdAt": "2025-10-18T06:55:39.168Z",
      "updatedAt": "2025-10-18T06:55:39.168Z",
      "role": "workflow:owner",
      "workflowId": "6YmkO6iyZbS18Lti",
      "projectId": "COQIBF46Vn0bg2e3"
    }
  ],
  "staticData": null,
  "tags": [
    {
      "createdAt": "2025-10-07T12:15:31.199Z",
      "updatedAt": "2025-10-07T12:15:31.199Z",
      "id": "FPKsDlaKRbVBVjZv",
      "name": "EXECUTE FILES"
    }
  ],
  "triggerCount": 1,
  "updatedAt": "2025-10-22T16:36:40.000Z",
  "versionId": "4dc93a85-60ae-455e-9b9e-265d85580e69"
}